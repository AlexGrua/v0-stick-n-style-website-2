# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## –ü—Ä–æ–±–ª–µ–º–∞
PostgREST –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–ª —Å—Ö–µ–º—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –æ—à–∏–±–∫–∞–º:
- `PGRST204`: "Could not find the 'sku' column of 'products' in the schema cache"
- `PGRST205`: "Could not find the table 'public.subcategories' in the schema cache"
- `PGRST200`: –û—à–∏–±–∫–∏ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏

## –ü—Ä–∏—á–∏–Ω–∞
–ö–æ–¥ –ø—ã—Ç–∞–ª—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π —Å—Ö–µ–º–æ–π, –Ω–æ —Ä–µ–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –±—ã–ª–∞ –¥—Ä—É–≥–æ–π:
- **Categories**: –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ `subcategories`
- **Products**: `sku`, `supplier id` (—Å –ø—Ä–æ–±–µ–ª–æ–º!) —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ JSONB –ø–æ–ª–µ `specifications`
- **Subcategories**: –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ `subcategories` —Å –ø–æ–ª–µ–º `category_id`

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. API Categories (`app/api/categories/route.ts`)
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –ò–∑–º–µ–Ω–∏–ª –ª–æ–≥–∏–∫—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ–π `subcategories`
- –î–æ–±–∞–≤–∏–ª JOIN —Å —Ç–∞–±–ª–∏—Ü–µ–π `subcategories` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –ó–∞–º–µ–Ω–∏–ª `subs` –Ω–∞ `subcategories` –≤ –æ—Ç–≤–µ—Ç–µ API

### 2. API Products (`app/api/products/route.ts`)
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –£–±—Ä–∞–ª JOIN —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü–µ–π `suppliers`
- –£–±—Ä–∞–ª –ø–æ–ø—ã—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏ `sku`, `subcategory_id`, `supplier_id`
- –ò–∑–º–µ–Ω–∏–ª –º–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö:
  - `sku` –±–µ—Ä–µ—Ç—Å—è –∏–∑ `specifications.sku`
  - `supplierId` –±–µ—Ä–µ—Ç—Å—è –∏–∑ `specifications.supplierId`
  - `supplier` –∏ `supplierCode` –ø–æ–ª—É—á–∞—é—Ç—Å—è –∏–∑ `specifications`
- –£–±—Ä–∞–ª —ç—Ç–∏ –ø–æ–ª—è –∏–∑ INSERT –∑–∞–ø—Ä–æ—Å–∞

### 3. API Subcategories (`app/api/subcategories/route.ts`)
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –ò–∑–º–µ–Ω–∏–ª –ª–æ–≥–∏–∫—É –¥–ª—è —á—Ç–µ–Ω–∏—è –∏–∑ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã `subcategories`
- –î–æ–±–∞–≤–∏–ª JOIN —Å —Ç–∞–±–ª–∏—Ü–µ–π `categories` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö —Å `category_name`

### 4. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ supplier
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –ó–∞–º–µ–Ω–∏–ª JOIN –Ω–∞ —Ñ–∏–ª—å—Ç—Ä –ø–æ JSONB: `specifications->>supplierId`

## –†–µ–∑—É–ª—å—Ç–∞—Ç
‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ:
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —á–∏—Ç–∞—é—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- –ü—Ä–æ–¥—É–∫—Ç—ã —á–∏—Ç–∞—é—Ç—Å—è –∏ —Å–æ–∑–¥–∞—é—Ç—Å—è
- –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ —á–∏—Ç–∞—é—Ç—Å—è
- Subcategories API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö (—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∞—è)

### Categories
```sql
id, name, slug, description, image_url, created_at, updated_at
```

### Products
```sql
id, name, slug, description, price, category_id, image_url, images, specifications (JSONB), in_stock, created_at, updated_at
```

### Specifications JSONB —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```json
{
  "sku": "ER12",
  "supplierId": "4",
  "status": "inactive",
  "technicalDescription": "...",
  "sizes": ["100x100"],
  "thickness": ["10mm"],
  "pcsPerBox": 10,
  "boxKg": 5.5,
  "boxM3": 0.001,
  "technicalSpecifications": [...],
  "colorVariants": [...],
  "productSpecifications": {...}
}
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
1. **–î–ª—è –∏–º–ø–æ—Ä—Ç–∞**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `specifications` JSONB –¥–ª—è –≤—Å–µ—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
2. **–î–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞**: –∏–∑–≤–ª–µ–∫–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ `specifications` JSONB
3. **–î–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞**: –æ–∂–∏–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ `specifications`
4. **–î–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É `subcategories` –¥–ª—è –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–π

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ
