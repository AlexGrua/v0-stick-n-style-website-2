# üöÄ –§–ò–ù–ê–õ–¨–ù–´–ô –ü–õ–ê–ù –í–´–ü–û–õ–ù–ï–ù–ò–Ø

## üìã –ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨ (–ø–æ –ø–æ—Ä—è–¥–∫—É)

### –®–∞–≥ 1: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ PostgREST –∫–µ—à–∞
1. **–û—Ç–∫—Ä–æ–π—Ç–µ Supabase Console** ‚Üí SQL Editor
2. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ:**
```sql
-- –í–∞—Ä–∏–∞–Ω—Ç 1: NOTIFY
NOTIFY pgrst, 'reload schema';

-- –í–∞—Ä–∏–∞–Ω—Ç 2: pg_notify (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
SELECT pg_notify('pgrst', 'reload schema');
```

### –®–∞–≥ 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ API –≤ Supabase
1. **–û—Ç–∫—Ä–æ–π—Ç–µ Supabase Console** ‚Üí Project Settings
2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª API**
3. **–ù–∞–∂–º–∏—Ç–µ "Restart"** (—ç—Ç–æ —Å–∞–º—ã–π "–∂–µ—Å—Ç–∫–∏–π" —Å–±—Ä–æ—Å –∫–µ—à–∞)

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ exposed schemas
1. **–í —Ç–æ–º –∂–µ —Ä–∞–∑–¥–µ–ª–µ API** –ø—Ä–æ–≤–µ—Ä—å—Ç–µ "Exposed schemas"
2. **–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ç–∞–º –µ—Å—Ç—å `public`** (–∏ –¥—Ä—É–≥–∏–µ —Å—Ö–µ–º—ã –≥–¥–µ –µ—Å—Ç—å —Ç–∞–±–ª–∏—Ü—ã)

### –®–∞–≥ 4: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä (Ctrl+C)
# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
npm run dev
```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É
node scripts/verify-after-fix.js
```

## üß™ –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤:

### ‚úÖ –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å:
- `/rest/v1/subcategories?select=id,category_id,slug` ‚Üí 200 OK
- `/api/subcategories` ‚Üí 200 OK
- `/api/products` ‚Üí 200 OK (–±–µ–∑ –æ—à–∏–±–æ–∫ FK –≤ –ª–æ–≥–∞—Ö)
- `/api/categories` ‚Üí 200 OK (–±–µ–∑ –æ—à–∏–±–æ–∫ FK –≤ –ª–æ–≥–∞—Ö)

### ‚ùå –î–æ–ª–∂–Ω–æ –∏—Å—á–µ–∑–Ω—É—Ç—å:
- –û—à–∏–±–∫–∏ "Could not find a relationship" –≤ –ª–æ–≥–∞—Ö
- –û—à–∏–±–∫–∏ "Could not find the 'sku' column" –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ
- 500 –æ—à–∏–±–∫–∏ –≤ `/api/subcategories`

## üéØ –§–ò–ù–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω–∫—É** http://localhost:3001/admin/catalog
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞** - –æ—à–∏–±–∫–∏ FK –¥–æ–ª–∂–Ω—ã –∏—Å—á–µ–∑–Ω—É—Ç—å
3. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–º–ø–æ—Ä—Ç –ø—Ä–æ–¥—É–∫—Ç–æ–≤** - –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫

## üö® –ï–°–õ–ò –ü–†–û–ë–õ–ï–ú–ê –û–°–¢–ê–ï–¢–°–Ø

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:
```sql
-- –í SQL Editor
SELECT grantee, table_name, privilege_type
FROM information_schema.role_table_grants
WHERE table_name IN ('products', 'categories', 'subcategories')
  AND grantee IN ('anon', 'service_role');
```

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ë–î:
```sql
-- –í SQL Editor
SELECT to_regclass('public.subcategories');
SELECT column_name FROM information_schema.columns
WHERE table_schema='public' AND table_name='products'
  AND column_name IN ('sku','subcategory_id','specifications');
```

## üìã –ß–ï–ö–õ–ò–°–¢ –í–´–ü–û–õ–ù–ï–ù–ò–Ø

- [ ] NOTIFY pgrst, 'reload schema' –≤—ã–ø–æ–ª–Ω–µ–Ω
- [ ] API –≤ Supabase –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
- [ ] Exposed schemas –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã (public –µ—Å—Ç—å)
- [ ] –°–µ—Ä–≤–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
- [ ] `node scripts/verify-after-fix.js` –≤—ã–ø–æ–ª–Ω–µ–Ω
- [ ] –û—à–∏–±–∫–∏ FK –∏—Å—á–µ–∑–ª–∏ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
- [ ] –ò–º–ø–æ—Ä—Ç –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç

## üéâ –ü–û–°–õ–ï –£–°–ü–ï–®–ù–û–ì–û –í–´–ü–û–õ–ù–ï–ù–ò–Ø

**–ú–∏–≥—Ä–∞—Ü–∏—è 001 –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–µ–Ω–∞!** 

- ‚úÖ –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- ‚úÖ PostgREST –∫–µ—à –æ–±–Ω–æ–≤–ª–µ–Ω
- ‚úÖ API —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ò–º–ø–æ—Ä—Ç –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~5-10 –º–∏–Ω—É—Ç  
**–°—Ç–∞—Ç—É—Å:** üöÄ –ì–û–¢–û–í –ö –í–´–ü–û–õ–ù–ï–ù–ò–Æ
